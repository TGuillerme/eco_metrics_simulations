# The what, how and why of trait-based analyses in ecology

Authors: [Thomas Guillerme](https://github/TGuillerme), [Pedro Cardoso](), [Maria Wagner JÃ¸rgensen](), [Stefano Mammola](), [Thomas J. Matthews]()

This repository contains all the code and data used in [this paper](preprint).

[![DOI](zenodo)](zenodo)

## Supplementary material

 <!-- * The supplementary tables and figures mentioned in the main text is available from [here](). -->
 * The supplementary vignette is available [here]() (or [here in html]())

## Data

The empirical data is available [here]().

## Reproducing the whole analysis

To reproduce the entire paper, you can follow these steps:

<!--  1. **Data download**: you can get the raw (and processed `mcmcmcglmmm` data) from [here](https://figshare.com/articles/dataset/Innovation_and_elaboration_on_the_avian_tree_of_life/20480355).
 2. **Data and packages preparation**: run the following scripts `01-Data_preparation.Rmd` to generate the base data for the anlysis (the shapespace and the cleaned tree distribution). This script takes approximatively 5 minutes to run.
 3. **mcmcmcglmmm analysis** OPTIONAL: this script (`02-mcmcmcglmmm_analysis.Rmd`) calculates the pGLMM model. It takes 3 CPU years to run and requires some manipulations on a cluster so can be skipped by directly using the data provided in `Data/Processed`. If you have difficulties reruning this analyses or a modification thereof please contact [Thomas](mailto:guillert@tcd.ie). For a more manageable example, you can refer to the [reproducible vignette](https://raw.rawgit.net/TGuillerme/mcmcmcglmmm/main/inst/MCMCglmm_mini_chains.html).
 4. **Measuring elaboration and innovation**: run the script `03-Elaboration_innovation_analysis.Rmd` to calculate all the elaboration and innovation data and data subsections for plotting. This script computes the core calculations of the project. For a smaller example, you can refer to the [reproducible vignette](https://raw.rawgit.net/TGuillerme/dispRity/master/inst/vignettes/Projection_analysis.html).
 5. **Plotting the ellipses for each group**: run the script `05-Figure_with_phylogeny.Rmd` to reproduce figure 1. 
 6. **Plotting the phylogeny**: run the script `04-Figure_with_ellipse_scalling_and_8D_histograms.Rmd` to reproduce figure 2.
 7. **Elaboration and innovation statistics**: run the script `07-Orthogonality_and_statistics.Rmd` to calculate the elaboration and innovation statistics in the manuscript and reproduce figure 3 and 4.
 8. **Supplementary materials**: runt the script `08-Supplementary_figures_tables.Rmd` to compile the supplementary materials and the script `09-Figure_key.Rmd` to specifically reproduce the cheat sheet figure.
 -->


<!-- ## Citing this work -->

To cite the paper, please use:
 <!-- * Preprint -->

<!-- To cite this repository, please use:
 * Thomas Guillerme, & Natalie Cooper. (2022). TGuillerme/elaboration_exploration_bird_beaks: v0.1-preprint (v0.1). Zenodo. [https://doi.org/10.5281/zenodo.6984934](https://doi.org/10.5281/zenodo.6984934)
 -->
